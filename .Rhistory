library(plotly)
ggplotly(plot_campanas_por_comuna,tooltip = c(cantidad, comuna))
ggplotly(plot_campanas_por_comuna,tooltip = c("cantidad", "comuna"))
plot_densidad<-ggplot(campanas_por_comuna, aes(x=poblacion, y=cantidad, color=comuna))+
geom_point(size=2)
plot_densidad
plot_densidad<-ggplot(campanas_por_comuna, aes(x=poblacion, y=cantidad, color=comuna))+
geom_point(size=3)
plot_densidad
ggplotly(plot_densidad)
campanas_verdes_shp@bbox
unique(campanas_verdes_shp@bbox)
unique(campanas_verdes_shp@coords)
unique(campanas_verdes_shp@coords$coords.x1)
library(jsonlite)
read_json(campanas_verdes_shp)
read_json(campanas_verdes_shp)
read_json("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes.geojson")
base<-read_json("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes.geojson")
View(base)
base<-fromJSON("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes.geojson")
View(base)
base<-stream_in("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes.geojson")
base<-flatten(fromJSON("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes.geojson"))
base<-lapply(fromJSON("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes.geojson"))
campanas_por_comuna<-campanas_verdes%>%
group_by(comuna)%>%
summarise(cantidad=n())%>%
mutate(comuna=as.factor(comuna))%>%
arrange(cantidad)
campanas_por_comuna<-campanas_por_comuna%>%
inner_join(poblacion, campanas_por_comuna, by="comuna")%>%
mutate(densidad=poblacion/cantidad)
mapa_caba<-st_read("http://cdn.buenosaires.gob.ar/datosabiertos/datasets/barrios/barrios.geojson")
head(mapa_caba)
ggplot(mapa_caba)%>%
geom_sf()
ggplot(mapa_caba)+
geom_sf()
ggplot(mapa_caba)+
geom_sf(data=comuna)
ggplot(mapa_caba)+
geom_sf()+
geom_sf(data=comuna)
comunas<-st_read("http://cdn.buenosaires.gob.ar/datosabiertos/datasets/comunas/CABA_comunas.geojson")
ggplot(mapa_caba)+
geom_sf()+
geom_sf(data=comunas)
head(comunas)
glimpse(comunas)
#junto la data
campanas_por_comuna<-campanas_por_comuna%>%
inner_join(poblacion, campanas_por_comuna, by="comuna")%>%
mutate(densidad=poblacion/cantidad)
campanas_verdes<-read.csv("campanas-verdes.csv", encoding = "UTF-8")
puntos_verdes<-read.csv("puntos-verdes.csv", encoding = "UTF-8")
poblacion<-read_xlsx("PDE.xlsx",
sheet = "2020",
skip = 1)%>%
slice(3:17)%>%
rename("varones"="...3", "mujeres"="...4", "comuna"="Comuna", "superficie"="Superficie  (km2)", "poblacion"="PoblaciÃ³n")%>%
mutate(comuna=as.factor(comuna),
poblacion=as.numeric(poblacion))
campanas_por_comuna<-campanas_verdes%>%
group_by(comuna)%>%
summarise(cantidad=n())%>%
mutate(comuna=as.factor(comuna))%>%
arrange(cantidad)
campanas_por_comuna<-campanas_por_comuna%>%
inner_join(poblacion, campanas_por_comuna, by="comuna")%>%
mutate(densidad=poblacion/cantidad)
plot_densidad<-ggplot(campanas_por_comuna, aes(x=poblacion, y=cantidad, color=comuna))+
geom_point(size=3)
ggplotly(plot_densidad)
glimpse(comunas)
comunas<-st_read("http://cdn.buenosaires.gob.ar/datosabiertos/datasets/comunas/CABA_comunas.geojson")%>%
rename("comuna"="COMUNAS")
glimpse(comunas)
campanas_por_comuna<-campanas_por_comuna%>%
left_join(comunas, campanas_por_comuna)
campanas_por_comuna<-campanas_por_comuna%>%
inner_join(comunas, campanas_por_comuna)
View(comunas)
campanas_por_comuna<-campanas_por_comuna%>%
full_join(comunas, campanas_por_comuna)
campanas_por_comuna<-campanas_por_comuna%>%
full_join(comunas, campanas_por_comuna, by="comuna")
comunas<-st_read("http://cdn.buenosaires.gob.ar/datosabiertos/datasets/comunas/CABA_comunas.geojson")%>%
mutate(comuna=as.factor(COMUNAS))
glimpse(comunas)
campanas_por_comuna<-campanas_por_comuna%>%
full_join(comunas, campanas_por_comuna, by="comuna")
ggplot(mapa_caba)+
geom_sf()+
geom_sf(data=campanas_por_comuna, aes(fill=densidad))+
scale_fill_distiller(palette = "Reds")
ggplot(mapa_caba)+
geom_sf(data=campanas_por_comuna, aes(fill=densidad))+
scale_fill_distiller(palette = "Reds")
ggplot(mapa_caba)+
geom_sf(comunas)+
geom_sf(data=campanas_por_comuna, aes(fill=densidad))+
scale_fill_distiller(palette = "Reds")
ggplot()+
geom_sf(mapa_caba)+
geom_sf(data=campanas_por_comuna, aes(fill=densidad))+
scale_fill_distiller(palette = "Reds")
ggplot()+
geom_sf(comunas)
ggplot(comunas)+
geom_sf()
ggplot(comunas)+
geom_sf()+
geom_sf(data=campanas_por_comuna, aes(fill=densidad))+
scale_fill_distiller(palette = "Reds")
ggplot(campanas_por_comuna, aes(fill=densidad))+
geom_sf()+
scale_fill_distiller(palette = "Reds")
ggplot(campanas_por_comuna, aes(fill=densidad))+
geom_sf(comunas)+
scale_fill_distiller(palette = "Reds")
mapa_comunas<-ggplot(campanas_por_comuna, aes(fill=densidad))+
geom_sf()+
scale_fill_distiller(palette = "Reds")
mapa_comunas
mapa_comunas<-ggplot(campanas_por_comuna, aes(fill=densidad))+
geom_sf(campanas_por_comuna)+
scale_fill_distiller(palette = "Reds")
mapa_comunas<-ggplot(campanas_por_comuna, aes(fill=densidad))+
geom_sf(aes(campanas_por_comuna))+
scale_fill_distiller(palette = "Reds")
mapa_comunas
mapa_comunas<-ggplot()+
geom_sf(campanas_por_comuna, aes(fill=densidad)))+
mapa_comunas<-ggplot()+
geom_sf(campanas_por_comuna, aes(fill=densidad))+
scale_fill_distiller(palette = "Reds")
View(comunas)
mapa_comunas<-ggplot(comunas)
mapa_comunas
mapa_comunas<-ggplot(comunas)+
geom_sf()+
mapa_comunas
mapa_comunas<-ggplot(comunas)+
geom_sf()
mapa_comunas
mapa_comunas<-ggplot()+
geom_sf(comunas)
mapa_comunas
mapa_comunas<-ggplot()+
geom_sf(comunas)
mapa_comunas<-ggplot(comunas)+
geom_sf()
mapa_comunas
mapa_comunas<-ggplot(campanas_por_comuna)+
geom_sf()
mapa_comunas
mapa_comunas<-ggplot(campanas_por_comuna)+
geom_sf(campanas_por_comuna)
mapa_comunas<-ggplot(ccomunas)+
geom_sf(campanas_por_comuna)
mapa_comunas<-ggplot(comunas)+
geom_sf(campanas_por_comuna)
rm(apa_reciclables, base,comuna, mapa_caba, superficie)
rm(perimetro)
mapa_comunas<-ggplot()+
geom_sf(comunas)
mapa_comunas<-ggplot(comunas)+
geom_sf()
mapa_comunas
mapa_comunas<-ggplot(campanas_por_comuna)+
geom_sf()
mapa_comunas
campanas_por_comuna<-campanas_por_comuna%>%
full_join(campanas_por_comuna, comunas, by="comuna")
campanas_por_comuna<-campanas_verdes%>%
group_by(comuna)%>%
summarise(cantidad=n())%>%
mutate(comuna=as.factor(comuna))%>%
arrange(cantidad)
campanas_por_comuna<-campanas_por_comuna%>%
inner_join(poblacion, campanas_por_comuna, by="comuna")%>%
mutate(densidad=poblacion/cantidad)
comunas<-st_read("http://cdn.buenosaires.gob.ar/datosabiertos/datasets/comunas/CABA_comunas.geojson")%>%
mutate(comuna=as.factor(COMUNAS))
campanas_por_comuna<-left_join(comunas, campanas_por_comuna, by="comuna")
mapa_comunas<-ggplot(campanas_por_comuna)+
geom_sf()
mapa_comunas
mapa_comunas<-ggplot(campanas_por_comuna, aes(fill=densidad))+
geom_sf()+
scale_fill_distiller(palette = "Reds")
mapa_comunas
mapa_comunas<-ggplot(campanas_por_comuna, aes(fill=densidad))+
geom_sf()+
scale_fill_distiller(palette = "Reds", direction = -1)
mapa_comunas
mapa_comunas<-ggplot(campanas_por_comuna, aes(fill=densidad))+
geom_sf()+
scale_fill_distiller(palette = "Reds", direction = 1)
mapa_comunas
library(data.table)
knitr::kable(campanas_por_comuna)
plot_densidad<-ggplot(campanas_por_comuna, aes(x=poblacion, y=cantidad, color=comuna))+
geom_point(size=3)
ggplotly(plot_densidad)
library(sf)
#traigamos la informacion geografica de las comunas en caba
comunas<-st_read("http://cdn.buenosaires.gob.ar/datosabiertos/datasets/comunas/CABA_comunas.geojson")%>%
mutate(comuna=as.factor(COMUNAS))
#juntemos nuestra data
campanas_por_comuna<-left_join(comunas, campanas_por_comuna, by="comuna")
puntos_verdes_shp<-readOGR("puntos_verdes_wgs84.shp")
library(leaflet)
campanas_verdes_shp<-readOGR("contenedores_verdes_wgs84.shp")
puntos_verdes_shp<-readOGR("puntos_verdes_wgs84.shp")
mapa_reciclables<-leaflet()%>%
addProviderTiles("OpenStreetMap.Mapnik")%>%
addMarkers(data=campanas_verdes_shp,
group = "contenedores para reciclables",
clusterOptions = markerClusterOptions(removeOutsideVisibleBounds = F))%>%
addMarkers(data=puntos_verdes_shp,
group = "puntos verdes")%>%
addLayersControl(position = "bottomleft",
overlayGroups = c("contenedores para reciclables", "puntos verdes"))
mapa_reciclables
library(leaflet)
campanas_verdes_shp<-readOGR("contenedores_verdes_wgs84.shp")
puntos_verdes_shp<-readOGR("puntos_verdes_wgs84.shp")
mapa_reciclables<-leaflet()%>%
addProviderTiles("OpenStreetMap.Mapnik")%>%
addMarkers(data=campanas_verdes_shp,
group = "contenedores para reciclables",
clusterOptions = markerClusterOptions(removeOutsideVisibleBounds = F))%>%
addMarkers(data=puntos_verdes_shp,
group = "puntos verdes",
clusterOptions = markerClusterOptions(removeOutsideVisibleBounds = F))%>%
addLayersControl(position = "bottomleft",
overlayGroups = c("contenedores para reciclables", "puntos verdes"))
mapa_reciclables
knitr::include_graphics('https://www.buenosaires.gob.ar/sites/gcaba/files/styles/interna_noticia/public/field/image/08072020-retoque_8219.jpg?itok=yMTf4fBn')
#junto la data
campanas_por_comuna<-campanas_por_comuna%>%
inner_join(poblacion, campanas_por_comuna, by="comuna")%>%
mutate(densidad=round(poblacion/cantidad, digits = 0))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(rgdal)
library(readxl)
campanas_verdes<-read.csv("campanas-verdes.csv", encoding = "UTF-8")
campanas_verdes_shp<-readOGR("contenedores_verdes_wgs84.shp")
campanas_verdes_shp@coords.nrs
campanas_verdes_shp@coords
library(ggmap)
bbox <- make_bbox(campanas_verdes_shp@coords$coords.x1,campanas_verdes_shp@coords$coords.x2)
View(campanas_verdes_shp)
campanas_verdes_shp@bbox
bbox <- make_bbox(campanas_verdes_shp@bbox)
campanas_verdes_shp@bbox
campanas_verdes_shp@data
campanas_verdes_shp@proj4string
library(sf)
comunas<-st_read("http://cdn.buenosaires.gob.ar/datosabiertos/datasets/comunas/CABA_comunas.geojson")
mapa_comunas<-ggplot(campanas_por_comuna)+
geom_sf()
mapa_comunas<-ggplot(comunas)+
geom_sf()
mapa_comunas
plot_density<-ggplot(comunas)+
geom_sf()+
geom_density2d_filled(aes(x=campanas_verdes_shp@coords$coords.x1, y=campanas_verdes_shp@coords$coords.x2))
plot_density
View(campanas_verdes)
glimpse(campanas_verdes_shp)
glimpse(campanas_verdes)
glimpse(campanas_verdes_shp@data)
readOGR("contenedores_verdes_wgs84.dbf")
readOGR("contenedores_verdes_wgs84.prj")
readOGR("contenedores_verdes_wgs84.shx")
readOGR("contenedores_verdes_wgs84.shp.xml")
glimpse(campanas_verdes)
campanas_verdes<-read.csv("campanas-verdes.csv", encoding = "UTF-8")
glimpse(campanas_verdes)
campanas_verdes_shp<-readOGR("contenedores_verdes_wgs84.shp")
glimpse(campanas_verdes_shp@data)
campanas_verdes_shp<-readOGR("contenedores_verdes_wgs84.shp")
glimpse(campanas_verdes_shp)
library(tidyverse)
library(sf)
mapa_caba<-read_sf("contenedores_verdes_wgs84.shp")
View(mapa_caba)
mapa_caba2<-read_sf("campanas-verdes.csv")
View(mapa_caba2)
coords_separadas <- mapa_caba %>%
mutate(lat = unlist(map(mapa_caba$geometry,1)),
long = unlist(map(mapa_caba$geometry,2)))
coords_separadas
View(coords_separadas)
comunas<-st_read("http://cdn.buenosaires.gob.ar/datosabiertos/datasets/comunas/CABA_comunas.geojson")%>%
mutate(comuna=as.factor(COMUNAS))
View(comunas)
comunas<-read_sf("http://cdn.buenosaires.gob.ar/datosabiertos/datasets/comunas/CABA_comunas.geojson")%>%
mutate(comuna=as.factor(COMUNAS))
View(comunas)
View(mapa_caba2)
#mapa_caba2<-read_sf("campanas-verdes.csv")
rm(mapa_caba2)
plot_calor<-ggplot(comunas, aes())
plot_calor
plot_calor<-ggplot(comunas, aes())+
geom_sf()
plot_calor<-ggplot(comunas, aes())+
geom_sf()
plot_calor
View(coords_separadas)
plot_calor<-ggplot(comunas, aes())+
geom_sf()+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
plot_calor
plot_calor<-ggplot(coords_separadas, aes())+
geom_sf()+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
plot_calor<-ggplot(coords_separadas, aes())+
geom_sf()+
#geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
plot_calor<-ggplot(coords_separadas, aes())+
geom_sf()
#geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
plot_calor<-ggplot(coords_separadas, aes())+
#geom_sf()
#geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
plot_calor<-ggplot(coords_separadas, aes())
#geom_sf()
#geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
plot_calor<-ggplot(comunas, aes())+
geom_sf()+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
mapa_caba<-st_read("contenedores_verdes_wgs84.shp")
View(mapa_caba)
plot_calor<-ggplot()+
geom_sf(comunas)+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
plot_calor<-ggplot()+
geom_sf(comunas)+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor<-ggplot()+
geom_sf(comunas, aes())+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
plot_calor<-ggplot()+
geom_sf(data=comunas, aes())+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
plot_calor<-ggplot()+
geom_sf(data=comunas)+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
mapa_caba_link<-read_sf("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes.geojson")
View(mapa_caba_link)
View(mapa_caba_link)
mapa_caba_link<-read_sf("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes.geojson",
encoding="UTf-8")
View(mapa_caba_link)
mapa_caba_link<-read_sf("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/perimetro/perimetro.geojson")
campanas_verdes<-st_read("contenedores_verdes_wgs84.shp")
plot(mapa_caba_link)
ggplot(mapa_caba_link)
ggplot(mapa_caba_link)+
geom_sf()
plot_calor<-ggplot()+
geom_sf(data=mapa_caba_link)+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
plot_calor<-ggplot()+
#geom_sf(data=mapa_caba_link)+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
plot_calor<-ggplot()+
geom_sf(data=mapa_caba_link)+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
View(mapa_caba_link)
plot_calor
plot_calor
mapa_caba_link<-read_sf("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/perimetro/perimetro.geojson")
campanas_verdes<-st_read("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes-zip.zip")
campanas_verdes_coords_separadas <- campanas_verdes %>%
mutate(lat = unlist(map(mapa_caba$geometry,1)),
long = unlist(map(mapa_caba$geometry,2)))
plot_calor<-ggplot()+
geom_sf(data=mapa_caba_link)+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
library(sf)
library(tidyverse)
mapa_caba_link<-read_sf("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/perimetro/perimetro.geojson")
campanas_verdes<-st_read("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes-zip.zip")
campanas_verdes_coords_separadas <- campanas_verdes %>%
mutate(lat = unlist(map(mapa_caba$geometry,1)),
long = unlist(map(mapa_caba$geometry,2)))
plot_calor<-ggplot()+
geom_sf(data=mapa_caba_link)+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
campanas_verdes<-st_read("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes.geojson")
campanas_verdes_coords_separadas <- campanas_verdes %>%
mutate(lat = unlist(map(mapa_caba$geometry,1)),
long = unlist(map(mapa_caba$geometry,2)))
plot_calor<-ggplot()+
geom_sf(data=mapa_caba_link)+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
campanas_verdes_coords_separadas <- campanas_verdes %>%
mutate(lat = unlist(map(geometry,1)),
long = unlist(map(geometry,2)))
plot_calor<-ggplot()+
geom_sf(data=mapa_caba_link)+
geom_density2d_filled(data = coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
plot_calor<-ggplot()+
geom_sf(data=mapa_caba_link)+
geom_density2d_filled(data = campanas_verdes_coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
knitr::opts_chunk$set(echo = TRUE)
#cargamos una nueva libreria
library(sf)
#traigamos la informacion geografica de las comunas en caba
mapa_caba_link<-read_sf("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/perimetro/perimetro.geojson")
#vamos a necesitar separar los valores de las coordenadas de cada campana
campanas_verdes_coords_separadas <- campanas_verdes %>%
mutate(lat = unlist(map(geometry,1)),
long = unlist(map(geometry,2)))
# install.packages("tidyverse")
# install.packages("rgdal")
# install.packages("readxl")
library(tidyverse)
library(rgdal)
library(readxl)
campanas_verdes<-read.csv("campanas-verdes.csv", encoding = "UTF-8")
poblacion<-read_xlsx("PDE.xlsx",
sheet = "2020",
skip = 1)%>%
slice(3:17)%>%
rename("varones"="...3",
"mujeres"="...4", "comuna"="Comuna",
"superficie"="Superficie  (km2)",
"poblacion"="PoblaciÃ³n")%>%
mutate(comuna=as.factor(comuna),
poblacion=as.numeric(poblacion))
#cargamos una nueva libreria
library(sf)
#traigamos la informacion geografica de las comunas en caba
mapa_caba_link<-read_sf("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/perimetro/perimetro.geojson")
#vamos a necesitar separar los valores de las coordenadas de cada campana
campanas_verdes_coords_separadas <- campanas_verdes %>%
mutate(lat = unlist(map(geometry,1)),
long = unlist(map(geometry,2)))
View(campanas_verdes)
#cargamos una nueva libreria
library(sf)
#traigamos la informacion geografica de las comunas en caba
mapa_caba_link<-read_sf("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/perimetro/perimetro.geojson")
campanas_verdes<-st_read("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes.geojson")
#vamos a necesitar separar los valores de las coordenadas de cada campana
campanas_verdes_coords_separadas <- campanas_verdes %>%
mutate(lat = unlist(map(geometry,1)),
long = unlist(map(geometry,2)))
#grafiquemos el mapa de calor
plot_calor<-ggplot()+
geom_sf(data=mapa_caba_link)+
geom_density2d_filled(data = campanas_verdes_coords_separadas, aes(x=lat, y=long), alpha=0.5)
plot_calor
#cargamos una nueva libreria
library(sf)
#traigamos la informacion geografica de las comunas en caba
mapa_caba_link<-read_sf("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/perimetro/perimetro.geojson")
campanas_verdes<-st_read("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes.geojson")
#vamos a necesitar separar los valores de las coordenadas de cada campana
campanas_verdes_coords_separadas <- campanas_verdes %>%
mutate(lat = unlist(map(geometry,1)),
long = unlist(map(geometry,2)))
#grafiquemos el mapa de calor
plot_calor<-ggplot()+
geom_sf(data=mapa_caba_link)+
geom_density2d_filled(data = campanas_verdes_coords_separadas, aes(x=lat, y=long), alpha=0.5)+
theme_minimal()+
labs(title = "Densidad de campanas verdes")
plot_calor
#cargamos una nueva libreria
library(sf)
#traigamos la informacion geografica de las comunas en caba
mapa_caba_link<-read_sf("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/perimetro/perimetro.geojson")
campanas_verdes_geo<-st_read("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/subsecretaria-de-higiene-urbana/campanas-verdes/campanas-verdes.geojson")
#vamos a necesitar separar los valores de las coordenadas de cada campana
campanas_verdes_coords_separadas <- campanas_verdes_geo %>%
mutate(lat = unlist(map(geometry,1)),
long = unlist(map(geometry,2)))
#grafiquemos el mapa de calor
plot_calor<-ggplot()+
geom_sf(data=mapa_caba_link)+
geom_density2d_filled(data = campanas_verdes_coords_separadas, aes(x=lat, y=long), alpha=0.5)+
theme_minimal()+
labs(title = "Densidad de campanas verdes")
plot_calor
